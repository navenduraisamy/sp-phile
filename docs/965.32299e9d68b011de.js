"use strict";(self.webpackChunksp_phile=self.webpackChunksp_phile||[]).push([[965],{7965:(We,ct,g)=>{g.r(ct),g.d(ct,{SpotifyModule:()=>De});var p=g(6895),wt=g(3048),u=g(5861);function Tt(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),e&&(i.href=e),o.href=t,o.href}const St=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${t}`)})();function d(t){const e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function b(t,e){const i=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function at(t,e={}){const n=e.width||function vt(t){const e=b(t,"border-left-width"),n=b(t,"border-right-width");return t.clientWidth+e+n}(t),i=e.height||function It(t){const e=b(t,"border-top-width"),n=b(t,"border-bottom-width");return t.clientHeight+e+n}(t);return{width:n,height:i}}function At(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const m=16384;function Pt(t){(t.width>m||t.height>m)&&(t.width>m&&t.height>m?t.width>t.height?(t.height*=m/t.width,t.width=m):(t.width*=m/t.height,t.height=m):t.width>m?(t.height*=m/t.width,t.width=m):(t.width*=m/t.height,t.height=m))}function C(t){return new Promise((e,n)=>{const i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}function Zt(t){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(function*(t){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)})).apply(this,arguments)}function Et(t,e,n){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(t,e,n){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),s=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),o.appendChild(s),s.appendChild(t),Zt(o)})).apply(this,arguments)}const f=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||f(n,e))};function lt(t,e,n){const i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;const s=St();try{e.className=`${e.className} ${s}`}catch{return}const c=document.createElement("style");c.appendChild(function kt(t,e,n){const i=`.${t}:${e}`,o=n.cssText?function Rt(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function Ot(t){return d(t).map(e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`).join(" ")}(n);return document.createTextNode(`${i}{${o}}`)}(s,n,i)),e.appendChild(c)}const ut="application/font-woff",pt="image/jpeg",$t={woff:ut,woff2:ut,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:pt,jpeg:pt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function A(t){const e=function Lt(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return $t[e]||""}function Ft(t){return t.split(/,/)[1]}function P(t){return-1!==t.search(/^(data:)/)}function ft(t,e){return`data:${e};base64,${t}`}function mt(t,e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(function*(t,e,n){const i=yield fetch(t,e);if(404===i.status)throw new Error(`Resource "${i.url}" not found`);const o=yield i.blob();return new Promise((s,c)=>{const a=new FileReader;a.onerror=c,a.onloadend=()=>{try{s(n({res:i,result:a.result}))}catch(l){c(l)}},a.readAsDataURL(o)})})).apply(this,arguments)}const E={};function Mt(t,e,n){let i=t.replace(/\?.*/,"");return n&&(i=t),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}function R(t,e,n){return O.apply(this,arguments)}function O(){return(O=(0,u.Z)(function*(t,e,n){const i=Mt(t,e,n.includeQueryParams);if(null!=E[i])return E[i];let o;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{o=ft(yield mt(t,n.fetchRequestInit,({res:c,result:a})=>(e||(e=c.headers.get("Content-Type")||""),Ft(a))),e)}catch(s){o=n.imagePlaceholder||"";let c=`Failed to fetch resource: ${t}`;s&&(c="string"==typeof s?s:s.message),c&&console.warn(c)}return E[i]=o,o})).apply(this,arguments)}function Dt(t){return k.apply(this,arguments)}function k(){return(k=(0,u.Z)(function*(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):C(e)})).apply(this,arguments)}function qt(t,e){return U.apply(this,arguments)}function U(){return(U=(0,u.Z)(function*(t,e){if(t.currentSrc){const s=document.createElement("canvas"),c=s.getContext("2d");return s.width=t.clientWidth,s.height=t.clientHeight,c?.drawImage(t,0,0,s.width,s.height),C(s.toDataURL())}const n=t.poster,i=A(n);return C(yield R(n,i,e))})).apply(this,arguments)}function Wt(t){return $.apply(this,arguments)}function $(){return($=(0,u.Z)(function*(t){var e;try{if(null!==(e=t?.contentDocument)&&void 0!==e&&e.body)return yield w(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)})).apply(this,arguments)}function Ht(t,e){return L.apply(this,arguments)}function L(){return(L=(0,u.Z)(function*(t,e){return f(t,HTMLCanvasElement)?Dt(t):f(t,HTMLVideoElement)?qt(t,e):f(t,HTMLIFrameElement)?Wt(t):t.cloneNode(!1)})).apply(this,arguments)}const Bt=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function jt(t,e,n){return F.apply(this,arguments)}function F(){return(F=(0,u.Z)(function*(t,e,n){var i,o;let s=[];return s=Bt(t)&&t.assignedNodes?d(t.assignedNodes()):f(t,HTMLIFrameElement)&&(null===(i=t.contentDocument)||void 0===i?void 0:i.body)?d(t.contentDocument.body.childNodes):d((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes),0===s.length||f(t,HTMLVideoElement)||(yield s.reduce((c,a)=>c.then(()=>w(a,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve())),e})).apply(this,arguments)}function Qt(t,e){return f(e,Element)&&(function Vt(t,e){const n=e.style;if(!n)return;const i=window.getComputedStyle(t);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):d(i).forEach(o=>{let s=i.getPropertyValue(o);"font-size"===o&&s.endsWith("px")&&(s=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1+"px"),f(t,HTMLIFrameElement)&&"display"===o&&"inline"===s&&(s="block"),"d"===o&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(o,s,i.getPropertyPriority(o))})}(t,e),function Ut(t,e){lt(t,e,":before"),lt(t,e,":after")}(t,e),function Yt(t,e){f(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),f(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function Jt(t,e){if(f(t,HTMLSelectElement)){const i=Array.from(e.children).find(o=>t.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}(t,e)),e}function Gt(t,e){return M.apply(this,arguments)}function M(){return(M=(0,u.Z)(function*(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const i={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const l=t.querySelector(a),h=document.querySelector(a);!l&&h&&!i[a]&&(i[a]=yield w(h,e,!0))}}const o=Object.values(i);if(o.length){const s="http://www.w3.org/1999/xhtml",c=document.createElementNS(s,"svg");c.setAttribute("xmlns",s),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const a=document.createElementNS(s,"defs");c.appendChild(a);for(let l=0;l<o.length;l++)a.appendChild(o[l]);t.appendChild(c)}return t})).apply(this,arguments)}function w(t,e,n){return D.apply(this,arguments)}function D(){return(D=(0,u.Z)(function*(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then(i=>Ht(i,e)).then(i=>jt(t,i,e)).then(i=>Qt(t,i)).then(i=>Gt(i,e)):null})).apply(this,arguments)}const gt=/url\((['"]?)([^'"]+?)\1\)/g,zt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Xt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Kt(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Nt(t){const e=[];return t.replace(gt,(n,i,o)=>(e.push(o),n)),e.filter(n=>!P(n))}function te(t,e,n,i,o){return q.apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(t,e,n,i,o){try{const s=n?Tt(e,n):e,c=A(e);let a;return a=o?ft(yield o(s),c):yield R(s,c,i),t.replace(Kt(e),`$1${a}$3`)}catch{}return t})).apply(this,arguments)}function ee(t,{preferredFontFormat:e}){return e?t.replace(Xt,n=>{for(;;){const[i,,o]=zt.exec(n)||[];if(!o)return"";if(o===e)return`src: ${i};`}}):t}function ht(t){return-1!==t.search(gt)}function dt(t,e,n){return W.apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(t,e,n){if(!ht(t))return t;const i=ee(t,n);return Nt(i).reduce((s,c)=>s.then(a=>te(a,c,e,n)),Promise.resolve(i))})).apply(this,arguments)}function T(t,e,n){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(t,e,n){var i;const o=null===(i=e.style)||void 0===i?void 0:i.getPropertyValue(t);if(o){const s=yield dt(o,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1})).apply(this,arguments)}function ne(t,e){return B.apply(this,arguments)}function B(){return(B=(0,u.Z)(function*(t,e){(yield T("background",t,e))||(yield T("background-image",t,e)),(yield T("mask",t,e))||(yield T("mask-image",t,e))})).apply(this,arguments)}function re(t,e){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(t,e){const n=f(t,HTMLImageElement);if((!n||P(t.src))&&(!f(t,SVGImageElement)||P(t.href.baseVal)))return;const i=n?t.src:t.href.baseVal,o=yield R(i,A(i),e);yield new Promise((s,c)=>{t.onload=s,t.onerror=c;const a=t;a.decode&&(a.decode=s),"lazy"===a.loading&&(a.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o})})).apply(this,arguments)}function ie(t,e){return V.apply(this,arguments)}function V(){return(V=(0,u.Z)(function*(t,e){const i=d(t.childNodes).map(o=>yt(o,e));yield Promise.all(i).then(()=>t)})).apply(this,arguments)}function yt(t,e){return Y.apply(this,arguments)}function Y(){return(Y=(0,u.Z)(function*(t,e){f(t,Element)&&(yield ne(t,e),yield re(t,e),yield ie(t,e))})).apply(this,arguments)}function oe(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const i=e.style;return null!=i&&Object.keys(i).forEach(o=>{n[o]=i[o]}),t}const _t={};function xt(t){return J.apply(this,arguments)}function J(){return(J=(0,u.Z)(function*(t){let e=_t[t];return null!=e||(e={url:t,cssText:yield(yield fetch(t)).text()},_t[t]=e),e})).apply(this,arguments)}function bt(t,e){return Q.apply(this,arguments)}function Q(){return Q=(0,u.Z)(function*(t,e){let n=t.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(function(){var c=(0,u.Z)(function*(a){let l=a.replace(i,"$1");return l.startsWith("https://")||(l=new URL(l,t.url).href),mt(l,e.fetchRequestInit,({result:h})=>(n=n.replace(a,`url(${h})`),[a,h]))});return function(a){return c.apply(this,arguments)}}());return Promise.all(s).then(()=>n)}),Q.apply(this,arguments)}function Ct(t){if(null==t)return[];const e=[];let i=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=o.exec(i);if(null===l)break;e.push(l[0])}i=i.replace(o,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let l=s.exec(i);if(null===l){if(l=a.exec(i),null===l)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(l[0])}return e}function se(t,e){return G.apply(this,arguments)}function G(){return(G=(0,u.Z)(function*(t,e){const n=[],i=[];return t.forEach(o=>{if("cssRules"in o)try{d(o.cssRules||[]).forEach((s,c)=>{if(s.type===CSSRule.IMPORT_RULE){let a=c+1;const h=xt(s.href).then(_=>bt(_,e)).then(_=>Ct(_).forEach(st=>{try{o.insertRule(st,st.startsWith("@import")?a+=1:o.cssRules.length)}catch(qe){console.error("Error inserting rule from remote css",{rule:st,error:qe})}})).catch(_=>{console.error("Error loading remote css",_.toString())});i.push(h)}})}catch(s){const c=t.find(a=>null==a.href)||document.styleSheets[0];null!=o.href&&i.push(xt(o.href).then(a=>bt(a,e)).then(a=>Ct(a).forEach(l=>{c.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(i).then(()=>(t.forEach(o=>{if("cssRules"in o)try{d(o.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${o.href}`,s)}}),n))})).apply(this,arguments)}function ce(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>ht(e.style.getPropertyValue("src")))}function ae(t,e){return z.apply(this,arguments)}function z(){return(z=(0,u.Z)(function*(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=d(t.ownerDocument.styleSheets);return ce(yield se(n,e))})).apply(this,arguments)}function le(t,e){return X.apply(this,arguments)}function X(){return(X=(0,u.Z)(function*(t,e){const n=yield ae(t,e);return(yield Promise.all(n.map(o=>dt(o.cssText,o.parentStyleSheet?o.parentStyleSheet.href:null,e)))).join("\n")})).apply(this,arguments)}function ue(t,e){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(function*(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:yield le(t,e);if(n){const i=document.createElement("style"),o=document.createTextNode(n);i.appendChild(o),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}})).apply(this,arguments)}function pe(t){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)(function*(t,e={}){const{width:n,height:i}=at(t,e),o=yield w(t,e,!0);return yield ue(o,e),yield yt(o,e),oe(o,e),yield Et(o,n,i)})).apply(this,arguments)}function S(t){return tt.apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(t,e={}){const{width:n,height:i}=at(t,e),o=yield pe(t,e),s=yield C(o),c=document.createElement("canvas"),a=c.getContext("2d"),l=e.pixelRatio||At(),h=e.canvasWidth||n,_=e.canvasHeight||i;return c.width=h*l,c.height=_*l,e.skipAutoScale||Pt(c),c.style.width=`${h}`,c.style.height=`${_}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,c.width,c.height)),a.drawImage(s,0,0,c.width,c.height),c})).apply(this,arguments)}function rt(){return(rt=(0,u.Z)(function*(t,e={}){return(yield S(t,e)).toDataURL("image/jpeg",e.quality||1)})).apply(this,arguments)}var r=g(8256),y=g(4004),me=g(8505),ge=g(5121),he=g(3900),de=g(529);let x=(()=>{class t{constructor(n){this.http=n}getProfile(){return this.http.get("https://api.spotify.com/v1/me").pipe((0,y.U)(n=>({...n,name:n.display_name})),(0,me.b)(n=>localStorage.setItem("user_id",n.id)))}getTopTracksOfUser(n){return n=Math.min(n,50),this.http.get(`https://api.spotify.com/v1/me/top/tracks?time_range=long_term&limit=${n}&offset=0`).pipe((0,y.U)(i=>i.items))}getTopArtistsOfUser(){return this.http.get("https://api.spotify.com/v1/me/top/artists?time_range=long_term&limit=5&offset=0").pipe((0,y.U)(n=>n.items))}createPlayList(){let n=localStorage.getItem("user_id");if(!n)throw new Error(`Invalid user id ${n}`);let s=this.http.post(`https://api.spotify.com/v1/users/${n}/playlists`,JSON.stringify({name:"SP-PHILE TOP",description:"This playlist has been created from sp-phile based on your spotify listening history.",public:!0})).pipe((0,y.U)(a=>a.id)),c=this.getTopTracksOfUser(5).pipe((0,y.U)(a=>a.map(l=>`spotify:track:${l.id}`)));return(0,ge.a)([s,c]).pipe((0,he.w)(([a,l])=>this.addItemsToPlaylist(a,l)))}addItemsToPlaylist(n,i){return this.http.post(`https://api.spotify.com/v1/playlists/${n}/tracks`,JSON.stringify({uris:i,position:0}))}}return t.\u0275fac=function(n){return new(n||t)(r.LFG(de.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ye(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",3)(2,"a",4),r._UZ(3,"img",5),r.qZA()(),r.BQk()),2&t){const n=r.oxw().ngIf;r.xp6(2),r.s9C("href",n.external_urls.spotify,r.LSH),r.xp6(1),r.s9C("src",n.images[0].url,r.LSH)}}function _e(t,e){if(1&t&&(r.ynx(0),r.YNc(1,ye,4,2,"ng-container",2),r.BQk()),2&t){const n=e.ngIf;r.oxw();const i=r.MAs(3);r.xp6(1),r.Q6J("ngIf",n.images.length>0)("ngIfElse",i)}}function xe(t,e){1&t&&r._UZ(0,"img",6)}let be=(()=>{class t{constructor(n){this.spotify=n,this.userProfile$=this.spotify.getProfile()}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-profile"]],decls:4,vars:3,consts:[[4,"ngIf"],["defaultPicture",""],[4,"ngIf","ngIfElse"],[1,"mx-2"],["target","_blank",3,"href"],["alt","","width","40px",1,"rounded-circle",3,"src"],["src","assets/images/koala.png","alt",""]],template:function(n,i){1&n&&(r.YNc(0,_e,2,2,"ng-container",0),r.ALo(1,"async"),r.YNc(2,xe,1,0,"ng-template",null,1,r.W1O)),2&n&&r.Q6J("ngIf",r.lcZ(1,1,i.userProfile$))},dependencies:[p.O5,p.Ov]}),t})();function Ce(t,e){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.qZA()),2&t){const n=e.$implicit;r.xp6(1),r.Oqu(n.name)}}function we(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Ce,2,1,"p",4),r.BQk()),2&t){const n=e.ngIf;r.xp6(1),r.Q6J("ngForOf",n)}}let Te=(()=>{class t{constructor(n){this.spotify=n,this.topTracks$=this.spotify.getTopTracksOfUser(5)}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-tracks"]],decls:6,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"mb-4"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),r._uU(3,"Top Tracks"),r.qZA(),r.YNc(4,we,2,1,"ng-container",3),r.ALo(5,"async"),r.qZA()()),2&n&&(r.xp6(4),r.Q6J("ngIf",r.lcZ(5,1,i.topTracks$)))},dependencies:[p.sg,p.O5,p.Ov]}),t})();function Se(t,e){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.qZA()),2&t){const n=e.$implicit;r.xp6(1),r.Oqu(n.name)}}function ve(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Se,2,1,"p",4),r.BQk()),2&t){const n=e.ngIf;r.xp6(1),r.Q6J("ngForOf",n)}}let Ie=(()=>{class t{constructor(n){this.spotify=n,this.topArtists$=this.spotify.getTopArtistsOfUser()}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-artists"]],decls:6,vars:3,consts:[[1,"row","mt-4","mt-md-0"],[1,"col-12"],[1,"mb-4"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),r._uU(3,"Top Artists"),r.qZA(),r.YNc(4,ve,2,1,"ng-container",3),r.ALo(5,"async"),r.qZA()()),2&n&&(r.xp6(4),r.Q6J("ngIf",r.lcZ(5,1,i.topArtists$)))},dependencies:[p.sg,p.O5,p.Ov]}),t})();var Ae=g(9300);function Pe(t,e){1&t&&r.Hsn(0,0,["*ngTemplateOutlet","imgTemplate; context: { image: artist.images[0] }"])}const Ze=function(t){return{image:t}};function Ee(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Pe,1,0,"ng-content",2),r.BQk()),2&t){const n=e.ngIf;r.oxw();const i=r.MAs(3);r.xp6(1),r.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",r.VKq(2,Ze,n.images[0]))}}function Re(t,e){if(1&t&&(r.TgZ(0,"div",3),r._UZ(1,"img",4),r.qZA()),2&t){const n=e.image;r.xp6(1),r.s9C("src",n.url,r.LSH)}}const Oe=["*"];let ke=(()=>{class t{constructor(n){this.spotifyService=n,this.topArtist=this.spotifyService.getTopArtistsOfUser().pipe((0,Ae.h)(i=>i.length>0),(0,y.U)(i=>i[0]))}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-img-display"]],ngContentSelectors:Oe,decls:4,vars:3,consts:[[4,"ngIf"],["imgTemplate",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"img-container"],["width","100%","alt","",3,"src"]],template:function(n,i){1&n&&(r.F$t(),r.YNc(0,Ee,2,4,"ng-container",0),r.ALo(1,"async"),r.YNc(2,Re,2,1,"ng-template",null,1,r.W1O)),2&n&&r.Q6J("ngIf",r.lcZ(1,1,i.topArtist))},dependencies:[p.O5,p.tP,p.Ov],styles:[".img-container[_ngcontent-%COMP%]{box-shadow:10px 10px gray}"]}),t})();function Ue(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"h1"),r._uU(2),r.qZA(),r.TgZ(3,"div",2)(4,"div",3)(5,"small",4),r._uU(6),r.qZA()()(),r.BQk()),2&t){const n=e.ngIf;r.xp6(2),r.Oqu(n),r.xp6(4),r.hij(" ",n<50?"Embrace the uniqueness of your music taste, as you navigate a landscape filled with hidden musical treasures.":"You are in tune with the beats that resonate widely making your playlist delightful celebration of shared musical joy"," ")}}let $e=(()=>{class t{constructor(n){this.spotify=n,this.stat=this.spotify.getTopTracksOfUser(50).pipe((0,y.U)(i=>i.map(o=>o.popularity)),(0,y.U)(this.average))}average(n){return Math.round(n.reduce((i,o)=>i+o)/n.length)}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-stat"]],decls:4,vars:3,consts:[[1,"mb-4"],[4,"ngIf"],[1,"row"],[1,"col-lg-8"],[1,"text-light","bg-success"]],template:function(n,i){1&n&&(r.TgZ(0,"h5",0),r._uU(1,"Tracks' average popularity"),r.qZA(),r.YNc(2,Ue,7,2,"ng-container",1),r.ALo(3,"async")),2&n&&(r.xp6(2),r.Q6J("ngIf",r.lcZ(3,1,i.stat)))},dependencies:[p.O5,p.Ov]}),t})();const Le=["*"];let Fe=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-action"]],ngContentSelectors:Le,decls:2,vars:0,consts:[[1,"action"]],template:function(n,i){1&n&&(r.F$t(),r.TgZ(0,"div",0),r.Hsn(1),r.qZA())},styles:[".action[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid #e5e7eb}.action[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f5f5f5;transform:scale(1.1)}"]}),t})();const Me=[{path:"",component:(()=>{class t{constructor(n){this.spotify=n,this.addIcon="\uf64d",this.downArrowIcon="\uf128",this.tickIcon="\uf272",this.addToPlaylistIcon=this.addIcon,this.downloadImageIcon=this.downArrowIcon,this.isActionComplete=null}downloadImage(n){"DI"!==this.isActionComplete&&function fe(t){return rt.apply(this,arguments)}(n,{quality:1,style:{background:"white"}}).then(i=>{var o=document.createElement("a");o.download="sp-phile-stats.jpeg",o.href=i,o.click(),this.downloadImageIcon=this.tickIcon,this.isActionComplete="DI",setTimeout(()=>{this.downloadImageIcon=this.downArrowIcon,this.isActionComplete=null},5e3)}).catch(i=>console.error(`Error: Could not download image. \n ${i.message}`))}createPlaylist(){"PL"!==this.isActionComplete&&this.spotify.createPlayList().subscribe(()=>{this.addToPlaylistIcon=this.tickIcon,this.isActionComplete="PL",setTimeout(()=>{this.addToPlaylistIcon=this.addIcon,this.isActionComplete=null},5e3)})}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(x))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-montly-wrapped"]],decls:32,vars:6,consts:[[1,"container","my-md-4"],[1,"row","d-flex","justify-content-center","align-items-start","p-4"],["capture",""],[1,"col-12","d-flex","align-items-center","justify-content-end","mb-5","py-2"],[1,"d-flex","align-items-center"],["href","https://open.spotify.com/","target","_blank"],["src","assets/images/spotify_icon.png","width","40px","alt",""],[1,"col-md-3","mb-auto"],[1,"offset-md-1","col-md-8","mt-4","mt-md-0"],[1,"row","mb-5"],[1,"col-12"],[1,"row"],[1,"col-md-6"],[1,"border-top","d-flex","align-items-center","justify-content-between","py-3"],["href","https://github.com/navenduraisamy/sp-phile","target","_blank"],[1,"action-container"],[1,"bootstrap-icon",3,"click"]],template:function(n,i){if(1&n){const o=r.EpF();r.TgZ(0,"section",0)(1,"div",1,2)(3,"div",3)(4,"div",4),r._UZ(5,"app-profile"),r.TgZ(6,"a",5),r._UZ(7,"img",6),r.qZA()()(),r.TgZ(8,"div",7),r._UZ(9,"app-img-display"),r.qZA(),r.TgZ(10,"div",8)(11,"div",9)(12,"div",10),r._UZ(13,"app-stat"),r.qZA()(),r.TgZ(14,"div",11)(15,"div",12),r._UZ(16,"app-tracks"),r.qZA(),r.TgZ(17,"div",12),r._UZ(18,"app-artists"),r.qZA()()()(),r.TgZ(19,"div",13)(20,"div")(21,"a",14),r._uU(22," github.com/navenduraisamy/sp-phile "),r.qZA()(),r.TgZ(23,"div",15)(24,"app-action")(25,"div",16),r.NdJ("click",function(){return i.createPlaylist()}),r.TgZ(26,"p"),r._uU(27),r.qZA()()(),r.TgZ(28,"app-action")(29,"div",16),r.NdJ("click",function(){r.CHM(o);const c=r.MAs(2);return r.KtG(i.downloadImage(c))}),r.TgZ(30,"p"),r._uU(31),r.qZA()()()()()()}2&n&&(r.xp6(25),r.ekj("green","PL"===i.isActionComplete),r.xp6(2),r.Oqu(i.addToPlaylistIcon),r.xp6(2),r.ekj("green","DI"===i.isActionComplete),r.xp6(2),r.hij(" ",i.downloadImageIcon," "))},dependencies:[be,Te,Ie,ke,$e,Fe],styles:[".brand[_ngcontent-%COMP%]{font-family:GlassAntiqua-Regular;font-size:3rem;color:#000;margin:0}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.action-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px}.action-container[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]:before{font-weight:700!important}.green[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:green;filter:drop-shadow(3px 3px 2px green)}"]}),t})()}];let De=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[p.ez,wt.Bz.forChild(Me)]}),t})()}}]);